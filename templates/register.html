<!DOCTYPE html>
<html>
<head>
    <title>Registrarse</title>
</head>
<body>
    <h1>Registrarse</h1>
    <form method="POST">
        <input type="text" name="nombre_usuario" placeholder="Nombre de usuario" required>
        <input type="password" name="password" placeholder="Contraseña" required>
        <select name="tipo_usuario" id="tipo_usuario">
            <option value="investigador">Investigador</option>
            <option value="colaborador">Colaborador</option>
        </select>
        <select name="grupo_indigena" id="grupo_indigena">
            <option value="">Seleccione un grupo...</option>
            <option value="bribri">Bribri</option>
            <option value="ngabe">Ngäbe</option>
            <option value="cabecar">Cabécar</option>
        </select>
        <button type="submit">Registrarse</button>
    </form>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tipoUsuarioSelect = document.querySelector('#tipo_usuario');
            const grupoIndigenaSelect = document.querySelector('#grupo_indigena');

            tipoUsuarioSelect.addEventListener('change', function() {
                // Deshabilitar selección de grupo indígena para investigadores
                if (this.value === 'investigador') {
                    grupoIndigenaSelect.disabled = true;
                    grupoIndigenaSelect.value = '';  // Resetea la selección
                } else {
                    grupoIndigenaSelect.disabled = false;
                }
            });

            // Inicialmente deshabilitar si se carga la página con investigador seleccionado
            if (tipoUsuarioSelect.value === 'investigador') {
                grupoIndigenaSelect.disabled = true;
                grupoIndigenaSelect.value = '';  // Resetea la selección
            }
        });
    </script>
</body>
</html>
